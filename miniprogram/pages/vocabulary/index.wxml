<!--vocabulary单词本页面-->
<view class="vocabulary-container">

  <!-- 主要内容区域 -->
  <scroll-view 
    class="main-content"
    scroll-y="{{true}}"
    refresher-enabled="{{true}}"
    refresher-triggered="{{refreshing}}"
    bindrefresherrefresh="onRefresh"
    refresher-default-style="black"
    refresher-background="#f8f9fa"
  >
    <!-- 使用word-list组件 -->
    <word-list 
      wx:if="{{!loading && words.length > 0}}"
      words="{{words}}"
      mode="full"
      wordType="{{wordType}}"
      displayMode="{{displayMode}}"
      showNumber="{{true}}"
      customClass="vocabulary-word-list"
      playSpeed="{{playSpeed}}"
      bind:maskToggle="onMaskToggle"
      bind:overdueHandle="onOverdueHandle"
      bind:wordtap="onWordTap"
    />

    <!-- 空状态提示 -->
    <view wx:if="{{!loading && words.length === 0}}" class="empty-state">
      <view class="empty-icon">
        <text wx:if="{{wordType === 'new'}}">🌟</text>
        <text wx:elif="{{wordType === 'review'}}">🎉</text>
        <text wx:else="{{wordType === 'overdue'}}">🏆</text>
      </view>
      <view class="empty-title">
        <text wx:if="{{wordType === 'new'}}">太棒了！今天的新词学完了</text>
        <text wx:elif="{{wordType === 'review'}}">复习任务完成！</text>
        <text wx:else="{{wordType === 'overdue'}}">所有单词都在掌握中！</text>
      </view>
      <view class="empty-subtitle">
        <text wx:if="{{wordType === 'new'}}">明天继续加油，词汇量稳步提升 💪</text>
        <text wx:elif="{{wordType === 'review'}}">记忆曲线保持良好，继续坚持 🔥</text>
        <text wx:else="{{wordType === 'overdue'}}">学习节奏很棒，保持这个状态 ✨</text>
      </view>
    </view>

    <!-- 加载状态 -->
    <view wx:if="{{loading}}" class="loading-state">
      <text class="loading-text">正在加载单词...</text>
    </view>
  </scroll-view>

  <!-- 会员权限蒙板 -->
  <view class="membership-mask-overlay" wx:if="{{showMembershipMask}}">
    <view class="membership-mask-content">
      <view class="mask-icon">🔒</view>
      <view class="mask-title">解锁智能单词本</view>
      <view class="mask-description">
        <text class="desc-line">科学单词学习法，助你高效记忆单词</text>
      </view>
      <button class="activate-btn" bindtap="onActivateMembership">
        立即解锁
      </button>
    </view>
  </view>

  <!-- 会员码输入弹窗 -->
  <view class="membership-modal-overlay" wx:if="{{showMembershipModal}}" bindtap="onCloseMembershipModal">
    <view class="membership-modal" catchtap="">
      <view class="modal-header">
        <text class="modal-title">激活会员码</text>
        <text class="modal-close" bindtap="onCloseMembershipModal">✕</text>
      </view>
      <view class="modal-content">
        <view class="input-section">
          <input class="code-input" 
                 placeholder="请输入12位激活码" 
                 value="{{codeInput}}"
                 bindinput="onCodeInput"
                 maxlength="12"
                 auto-focus="{{showMembershipModal}}"/>
        </view>
        <view class="modal-tips">
          <text class="tip-text">• 激活后立即生效</text>
          <text class="tip-text">• 会员时长自动叠加</text>
        </view>
      </view>
      <view class="modal-actions">
        <button class="cancel-btn" bindtap="onCloseMembershipModal">取消</button>
        <button class="confirm-btn" 
                bindtap="onActivateCode" 
                disabled="{{activating || codeInput.length !== 12}}"
                loading="{{activating}}">
          {{activating ? '激活中...' : '激活'}}
        </button>
      </view>
    </view>
  </view>

</view>